# ============================================================
# events.yaml -- World Event Triggers (TEMPLATE)
# ============================================================
#
# PURPOSE:
#   Defines conditional world events triggered by meter thresholds or other
#   conditions. Events create dynamic world responses to player actions --
#   patrols increase, factions react, locations change state.
#
# USED BY:
#   - WorldSim node: reads triggers and effects for event firing
#   - era.yaml global_event_templates: references event IDs for global events
#
# CONVENTIONS:
#   - Event IDs use "event_" prefix with snake_case: event_patrol_increase
#   - type "hard" = mandatory (always fires when conditions met)
#   - type "soft" = optional (may fire based on probability)
#   - Aim for 2-5 events per era
#
# GOTCHAS:
#   - type must be "hard" or "soft"
#   - triggers reference meter names from meters.yaml
#   - effects values should be quoted strings for numeric values: '+10' not +10
#   - location_selector.tags_any matches against location tags in locations.yaml
#   - broadcast_rules.visible_to: "all" (everyone knows) or "present" (only at location)
# ============================================================

events:

  # ----------------------------------------------------------
  # EVENT 1: A mandatory event triggered by high global heat
  # ----------------------------------------------------------
  - id: event_security_crackdown
    # type: "hard" = mandatory (always fires); "soft" = probabilistic
    type: hard

    # triggers: conditions that must be met for this event to fire
    # Keys reference meter names from meters.yaml
    triggers:
      heat_global:
        min: 50              # Fires when global heat reaches 50+

    # location_selector: which locations this event affects
    # tags_any: event fires at locations with ANY of these tags
    location_selector:
      tags_any:
        - military
        - secure

    # effects: what happens when this event fires
    # Keys are meter names or special effect identifiers
    # Values should be quoted strings for numeric adjustments
    effects:
      heat_by_location: '+10'

    # broadcast_rules: who knows about this event
    # visible_to: "all" = everyone; "present" = only players/NPCs at the location
    broadcast_rules:
      visible_to: all

  # ----------------------------------------------------------
  # EVENT 2: A soft event triggered by local heat
  # ----------------------------------------------------------
  - id: event_patrol_increase
    type: soft

    triggers:
      heat_by_location:
        min: 40              # Fires when local heat reaches 40+

    location_selector:
      tags_any:
        - hub
        - trade
        - patrol

    effects:
      security_level: '+10'

    broadcast_rules:
      visible_to: present
